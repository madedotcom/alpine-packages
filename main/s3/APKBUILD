# Maintainer: Bob Gregory <bob@made.com>
pkgname=s3
pkgver=1.1.4
pkgrel=0
pkgdesc="S3 cli tool"
url="https://github.com/barnybug/s3"
arch="x86_64"
license="MIT"
depends=""
makedepends="go make automake curl ca-certificates"
install=""
subpackages=""
source="$pkgname-$pkgver.tar.gz::https://github.com/barnybug/s3/archive/$pkgver.tar.gz"
#source="$pkgname-$pkgver.tar.gz::https://github.com/madedotcom/s3/archive/grr-version-api.tar.gz"


_builddir="$srcdir/$pkgname-$pkgver"

build() {
    export GOPATH="/home/builder/package"
    mkdir -p /home/builder/package/src/github.com/barnybug/s3/
    mkdir -p /home/builder/package/src/github.com/aws/aws-sdk-go/
    mkdir -p /home/builder/package/src/github.com/codegangsta/cli/
    mv $srcdir/$pkgname-$pkgver/* /home/builder/package/src/github.com/barnybug/s3/
    cp -r /home/builder/package/src/github.com/barnybug/s3/vendor/aws/aws-sdk-go/* /home/builder/package/src/github.com/aws/aws-sdk-go/
    cp -r /home/builder/package/src/github.com/barnybug/s3/vendor/codegangsta/cli/* /home/builder/package/src/github.com/codegangsta/cli/
    cd /home/builder/package/src/github.com/barnybug/s3/
    make
}

package() {
    cd "$_builddir"
    install -Dm755 $pkgname "$pkgdir/usr/bin/$pkgname"
}

sha512sums="84a17716c08433278a9b68aaa3dbe8f30899d78601935dea002225012ccb8b41f0a10e4cf1724b1ed913e6dc231400825868c4ba4a38292f985e6dba926a0a35  $pkgname-$pkgver.tar.gz"
